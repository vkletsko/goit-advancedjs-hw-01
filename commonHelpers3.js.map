{"version":3,"file":"commonHelpers3.js","sources":["../src/js/form-state-storage.js","../src/js/03-feedback.js"],"sourcesContent":["export class FormStateStorage {\n  constructor({ key, data = '' } = {}) {\n    this.key = key;\n    this._data = data;\n  }\n\n  get data() {\n    try {\n      const dataFromLS = localStorage.getItem(this.key);\n      const parsedData = dataFromLS ? JSON.parse(dataFromLS) : {};\n      return parsedData;\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  set data(newData) {\n    try {\n      localStorage.setItem(this.key, JSON.stringify(newData));\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  reset() {\n    localStorage.removeItem(this.key);\n  }\n}\n","import throttle from 'lodash.throttle';\nimport { FormStateStorage } from './form-state-storage';\n\nconst formEL = document.querySelector('.feedback-form');\nconst formStateOptions = {\n  key: 'feedback-form-state',\n};\nconst formState = new FormStateStorage(formStateOptions);\n\nconst onFormInput = () => {\n  const { email, message } = formEL.elements;\n  formState.data = { email: email.value, message: message.value };\n};\n\nconst onFormSubmit = event => {\n  event.preventDefault();\n  formEL.reset();\n  console.log(formState.data);\n  formState.reset();\n};\n\nconst fillFormFromStorage = () => {\n  const { email, message } = formState.data;\n\n  formEL.elements.email.value = email || '';\n  formEL.elements.message.value = message || '';\n};\n\nfillFormFromStorage();\nformEL.addEventListener('input', throttle(onFormInput, 500));\nformEL.addEventListener('submit', onFormSubmit);"],"names":["FormStateStorage","key","data","dataFromLS","error","newData","formEL","formStateOptions","formState","onFormInput","email","message","onFormSubmit","event","fillFormFromStorage","throttle"],"mappings":"wIAAO,MAAMA,CAAiB,CAC5B,YAAY,CAAE,IAAAC,EAAK,KAAAC,EAAO,EAAE,EAAK,CAAA,EAAI,CACnC,KAAK,IAAMD,EACX,KAAK,MAAQC,CACd,CAED,IAAI,MAAO,CACT,GAAI,CACF,MAAMC,EAAa,aAAa,QAAQ,KAAK,GAAG,EAEhD,OADmBA,EAAa,KAAK,MAAMA,CAAU,EAAI,EAE1D,OAAQC,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,CAC1B,CACF,CACD,IAAI,KAAKC,EAAS,CAChB,GAAI,CACF,aAAa,QAAQ,KAAK,IAAK,KAAK,UAAUA,CAAO,CAAC,CACvD,OAAQD,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,CAC1B,CACF,CACD,OAAQ,CACN,aAAa,WAAW,KAAK,GAAG,CACjC,CACH,CCtBA,MAAME,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAmB,CACvB,IAAK,qBACP,EACMC,EAAY,IAAIR,EAAiBO,CAAgB,EAEjDE,EAAc,IAAM,CACxB,KAAM,CAAE,MAAAC,EAAO,QAAAC,GAAYL,EAAO,SAClCE,EAAU,KAAO,CAAE,MAAOE,EAAM,MAAO,QAASC,EAAQ,MAC1D,EAEMC,EAAeC,GAAS,CAC5BA,EAAM,eAAc,EACpBP,EAAO,MAAK,EACZ,QAAQ,IAAIE,EAAU,IAAI,EAC1BA,EAAU,MAAK,CACjB,EAEMM,EAAsB,IAAM,CAChC,KAAM,CAAE,MAAAJ,EAAO,QAAAC,GAAYH,EAAU,KAErCF,EAAO,SAAS,MAAM,MAAQI,GAAS,GACvCJ,EAAO,SAAS,QAAQ,MAAQK,GAAW,EAC7C,EAEAG,IACAR,EAAO,iBAAiB,QAASS,EAASN,EAAa,GAAG,CAAC,EAC3DH,EAAO,iBAAiB,SAAUM,CAAY"}